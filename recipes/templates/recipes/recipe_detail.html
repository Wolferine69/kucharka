{% extends 'recipes/base.html' %}

{% block title %}{{ recipe.title }}{% endblock %}

{% block content %}
    <h1 class="mb-4">{{ recipe.title }}</h1>

    <h2>Kategorie</h2>
    <ul class="list-group mb-4">
        {% for category in recipe.categories.all %}
            <li class="list-group-item">{{ category.name }}</li>
        {% empty %}
            <li class="list-group-item">Žádné kategorie</li>
        {% endfor %}
    </ul>

    <h2>Ingredience</h2>
    <ul class="list-group mb-4">
        {% for ingredient in recipe.recipe_ingredients.all %}
            <li class="list-group-item">
                {{ ingredient.quantity|floatformat:-1 }}
                {% if ingredient.unit %}
                    {{ ingredient.unit }}
                {% endif %}
                {{ ingredient.name }}
            </li>
        {% empty %}
            <li class="list-group-item">Žádné ingredience</li>
        {% endfor %}
    </ul>

    <h2>Postup</h2>
    <div class="card mb-4">
        <div class="card-body">
            <p>{{ recipe.instructions|linebreaks }}</p>
        </div>
    </div>

    {% if recipe.image %}
        <h2>Obrázek</h2>
        <img src="{{ recipe.image.url }}" alt="{{ recipe.title }}" class="img-fluid mb-4">
    {% endif %}

    <h2>Přidat poznámku</h2>
    <form method="post" class="mb-4">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" class="btn btn-primary">Přidat poznámku</button>
    </form>

    <h2>Poznámky</h2>
    <ul class="list-group mb-4">
        {% for note in recipe.notes.all %}
            <li class="list-group-item">{{ note.text }}</li>
        {% empty %}
            <li class="list-group-item">Žádné poznámky</li>
        {% endfor %}
    </ul>

    <p class="d-flex flex-column align-items-start">
        <a href="{% url 'category_recipes' category_slug %}" class="btn btn-secondary mb-2">Zpět na recepty v kategorii</a>
        <a href="{% url 'home' %}" class="btn btn-secondary">Zpět na kategorie</a>
    </p>
{% endblock %}